<h1>Editing User Rule</h1>
<%= render 'form', user_rule: @user_rule %>
<hr/>
<h2>Effects</h2>
<div class="btn-group">
  <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Create <span class="caret"></span>
  </button>

  <ul class="dropdown-menu">
    <li><%= link_to "Promote User", new_workflow_user_rule_user_rule_effect_path(@workflow, @user_rule, action_type: 'promote_user') %></li>
  </ul>
</div>
<table class="table table-striped table-sm">
  <thead>
    <tr>
      <th>Status</th>
      <th>Effect</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% @user_rule.user_rule_effects.each do |rule_effect| %>
    <tr>
      <td>
        <%= render partial: 'shared/stoplight_color', locals: {stoplight_color: rule_effect.effect.stoplight_color} %>
      </td>
      <td><%= render partial: 'effect', locals: {effect: rule_effect.effect} %></td>
      <td>
        <%= link_to [:edit, @workflow, @user_rule, rule_effect] do %>
          <i class="glyphicon glyphicon-cog text-warning"></i>
          <span class="sr-only">Edit</i>
        <% end %>
        <%= link_to [@workflow, @user_rule, rule_effect], method: :delete, data: {confirm: "Are you sure?"} do %>
          <i class="glyphicon glyphicon-trash text-danger"></i>
          <span class="sr-only">Delete</i>
        <% end %>
      </td>
    </tr>
    <% end %>
    </tbody>
</table>
